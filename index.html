<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- PWA & Meta Info -->
    <title>Kansai2026</title>
    <meta name="apple-mobile-web-app-title" content="Kansai2026">
    <meta name="application-name" content="Kansai2026">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#fdfafb">
    
    <!-- Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Styles -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #fdfafb;
            color: #4a4a4a;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .glass-card {
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .bg-morandi-main { background-color: #78C2C4; }
        .bg-morandi-pink { background-color: #FEDFE1; }
        .bg-morandi-yellow { background-color: #FAD689; }
        .bg-morandi-green { background-color: #A8D8B9; }
        
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 1. è³‡æ–™æ•¸æ“š (Updated Itinerary & Passes) ---
        
        const itineraryData = [
            {
                day: 1, date: "02/16", weekday: "é€±ä¸€", location: "ç¥æˆ¶", color: "bg-[#78C2C4]",
                events: [
                    { time: "17:10", title: "æŠµé”é—œè¥¿æ©Ÿå ´ T2", icon: "plane-arrival", desc: "æº–å‚™å‰å¾€ç¥æˆ¶å¸‚å€", type: "flight" },
                    { 
                        time: "äº¤é€š", 
                        title: "é—œè¥¿æ©Ÿå ´ â” ç¥æˆ¶ä¸‰å®®ç«™ ğŸ’³åˆ·ICå¡æˆ–è³¼ç¥¨", 
                        icon: "train", 
                        type: "transport",
                        desc: "æ–¹æ¡ˆ A (é«˜é€Ÿèˆ¹ - æ¨è–¦)ï¼šT1(12è™Ÿæ«ƒæª¯)/T2(æ¥é§è»Š) â†’ ç¢¼é ­ â” Bay Shuttle é«˜é€Ÿèˆ¹ â” ç¥æˆ¶æ©Ÿå ´ â” Port Liner â” ä¸‰å®®ç«™\næ–¹æ¡ˆ B (JR)ï¼šé—œè¥¿æ©Ÿå ´ç«™ â” JRé—œç©ºå¿«é€Ÿ â” å¤§é˜ªç«™ â” JRç¥æˆ¶ç·šæ–°å¿«é€Ÿ â” ä¸‰å®®ç«™" 
                    },
                    { time: "19:30", title: "ç¥æˆ¶ç¾åˆ©å …å…¬åœ’æ±æ–¹å¤§é…’åº—", icon: "hotel", desc: "Check-in", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "ä¸‰å®®ç«™ â” é£¯åº— ğŸ’³åˆ·ICå¡", 
                        icon: "bus", 
                        type: "transport",
                        desc: "æ–¹æ¡ˆ Aï¼šä¸‰å®®ç«™ Mint Kobe 1F å·´å£«ç¸½ç«™ (8è™Ÿæœˆå°) æ­ä¹˜é£¯åº—æ¥é§è»Š\næ–¹æ¡ˆ Bï¼šè¨ˆç¨‹è»Šç´„ 10 åˆ†é˜" 
                    },
                    { time: "20:30", title: "ç¾åˆ©å …å…¬åœ’", icon: "person-running", desc: "æ´»å‹•ï¼šç¥æˆ¶æ¸¯ç£å¤œè·‘ (5-10km)", type: "activity" }
                ]
            },
            {
                day: 2, date: "02/17", weekday: "é€±äºŒ", location: "ç¥æˆ¶", color: "bg-[#78C2C4]",
                events: [
                    { 
                        time: "äº¤é€š", 
                        title: "é£¯åº— â” å…µåº«ç¸£ç«‹ç¾è¡“é¤¨ ğŸ«KRP 3æ—¥åˆ¸", 
                        icon: "train-tram", 
                        type: "transport",
                        desc: "æ¥é§è»Š â†’ ä¸‰å®®ç«™ â” é˜ªç¥æœ¬ç·š (å¾€æ¢…ç”°) â” å²©å±‹ç«™" 
                    },
                    { time: "10:00", title: "å…µåº«ç¸£ç«‹ç¾è¡“é¤¨", icon: "building", desc: "å®‰è—¤å¿ é›„è¨­è¨ˆï¼Œå¿…æ‹ã€Œé’è˜‹æœã€", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "å²©å±‹ç«™ â” ç¥æˆ¶èˆŠå±…ç•™åœ° ğŸ«KRP 3æ—¥åˆ¸", 
                        icon: "train-tram", 
                        type: "transport",
                        desc: "é˜ªç¥æœ¬ç·š â” å…ƒç”ºç«™" 
                    },
                    { time: "12:30", title: "ç¥æˆ¶èˆŠå±…ç•™åœ°", icon: "utensils", desc: "åˆé¤ï¼šæ­é¢¨å»ºç¯‰ç¾¤èˆ‡å’–å•¡å»³", type: "food" },
                    { time: "14:30", title: "ç¥æˆ¸ æ „ç”ºé€š", icon: "store", desc: "é€›è¡—ï¼šç¨ç«‹æ–‡å…·åº—ã€é›œè²¨", type: "shopping" },
                    { time: "17:00", title: "ç¥æˆ¶ç‰›æ’ Ishida. æœ¬åº—", icon: "utensils", desc: "æ™šé¤ï¼šé ç´„åˆ¶ç¥æˆ¶ç‰›", type: "food" },
                    { 
                        time: "äº¤é€š", 
                        title: "ä¸‰å®®ç«™ â” æ‘©è€¶å±± æ¬æ˜Ÿå° ğŸ’³åˆ·ICå¡", 
                        icon: "bus", 
                        type: "transport",
                        desc: "å¸‚å·´å£«18ç³»çµ± â” æ‘©è€¶çºœè»Šä¸‹ â” æ‘©è€¶ Viewline (çºœè»Š+ç´¢é“)\n(è¨»: KRPä¸å«æ­¤æ®µ)" 
                    },
                    { time: "19:00", title: "æ¬æ˜Ÿå°", icon: "star", desc: "æ—¥æœ¬ä¸‰å¤§å¤œæ™¯", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "æ¬æ˜Ÿå° â” é£¯åº— ğŸ’³åˆ·ICå¡", 
                        icon: "bus", 
                        type: "transport",
                        desc: "åŸè·¯è¿”å›ä¸‰å®® â” é£¯åº—æ¥é§è»Š" 
                    }
                ]
            },
            {
                day: 3, date: "02/18", weekday: "é€±ä¸‰", location: "æœ‰é¦¬", color: "bg-[#78C2C4]",
                events: [
                    { time: "10:00", title: "ç¥æˆ¶ç¾åˆ©å …å…¬åœ’æ±æ–¹å¤§é…’åº—", icon: "door-open", desc: "Check-out", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "ä¸‰å®®ç«™ â” æœ‰é¦¬æº«æ³‰ç«™ ğŸ«KRP 3æ—¥åˆ¸", 
                        icon: "train", 
                        type: "transport",
                        desc: "å¸‚ç‡Ÿåœ°ä¸‹éµ (å¾€è°·ä¸Š) â” è°·ä¸Šç«™ â” ç¥æˆ¶é›»éµ (å¾€æœ‰é¦¬å£) â” æœ‰é¦¬å£ â” æœ‰é¦¬æº«æ³‰ç«™\n(å…¨ç¨‹ KRP å¯ç”¨)" 
                    },
                    { time: "11:30", title: "æœ‰é¦¬æº«æ³‰", icon: "water", desc: "æº«æ³‰è¡—è€èˆ–å·¡ç¦®ã€ç‚­é…¸ç…é¤…", type: "activity" },
                    { time: "15:00", title: "æœˆå…‰åœ’éŠæœˆå±±èŠ", icon: "hotel", desc: "Check-in: æˆ¿å…§éœ²å¤©é¢¨å‘‚", type: "hotel" },
                    { time: "18:00", title: "æœˆå…‰åœ’éŠæœˆå±±èŠ", icon: "utensils", desc: "æ™šé¤ï¼šæ—…é¤¨å…§æ–™ç†", type: "food" }
                ]
            },
            {
                day: 4, date: "02/19", weekday: "é€±å››", location: "å¤§é˜ª", color: "bg-[#FEDFE1]",
                events: [
                    { time: "11:00", title: "æœˆå…‰åœ’éŠæœˆå±±èŠ", icon: "door-open", desc: "Check-out", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "æœ‰é¦¬æº«æ³‰ â” å¤§é˜ªæ¢…ç”° ğŸ«KRP 3æ—¥åˆ¸", 
                        icon: "train", 
                        type: "transport",
                        desc: "ç¥æˆ¶é›»éµ â” è°·ä¸Š â” åœ°éµ â” ä¸‰å®® â” è½‰ä¹˜é˜ªæ€¥ç‰¹æ€¥ â” å¤§é˜ªæ¢…ç”°\n(åˆ©ç”¨ KRP çœä¸‹é«˜é€Ÿå·´å£«è²»ç”¨)" 
                    },
                    { 
                        time: "äº¤é€š", 
                        title: "æ¢…ç”°ç«™ â” æœ¬ç”ºç«™ ğŸ’³åˆ·ICå¡", 
                        icon: "train-subway", 
                        type: "transport",
                        desc: "å¾¡å ‚ç­‹ç·š â” æœ¬ç”ºç«™ (13/11è™Ÿå‡ºå£)" 
                    },
                    { time: "13:00", title: "æ±æ€¥stayå¤§é˜ªæœ¬ç”ºé…’åº—", icon: "hotel", desc: "å¯„æ”¾è¡Œæ", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "æœ¬ç”º â” ä¸­å´ç”º ğŸ’³åˆ·ICå¡", 
                        icon: "train-subway", 
                        type: "transport",
                        desc: "è°·ç”ºç·š (æ±æ¢…ç”°è½‰ä¹˜)" 
                    },
                    { time: "14:00", title: "ä¸­å´ç”º", icon: "flask", desc: "é«”é©—ï¼šå¾©å¤å··å¼„èª¿é¦™é«”é©—", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "ä¸­å´ç”º â” å¤©ç‹å¯º ğŸ’³åˆ·ICå¡", 
                        icon: "train-subway", 
                        type: "transport",
                        desc: "è°·ç”ºç·šç›´é”" 
                    },
                    { time: "16:00", title: "Sports Depo å¤©ç‹å¯ºåº—", icon: "bag-shopping", desc: "Q's Mall é‹å‹•ç”¨å“", type: "shopping" },
                    { time: "18:30", title: "Harukas 300", icon: "city", desc: "å±•æœ›å°å¤œæ™¯", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "å¤©ç‹å¯º â” é£¯åº— ğŸ’³åˆ·ICå¡", 
                        icon: "train-subway", 
                        type: "transport",
                        desc: "å¾¡å ‚ç­‹ç·šè¿”å›æœ¬ç”º" 
                    }
                ]
            },
            {
                day: 5, date: "02/20", weekday: "é€±äº”", location: "å¤§é˜ª", color: "bg-[#FEDFE1]",
                events: [
                    { 
                        time: "äº¤é€š", 
                        title: "å¸‚å€ç§»å‹• ğŸ’³åˆ·ICå¡", 
                        icon: "train-subway", 
                        type: "transport", 
                        desc: "å»ºè­°è³¼è²·å¤§é˜ªåœ°éµä¸€æ—¥åˆ¸(å¹³æ—¥820/å‡æ—¥620)æ›´åˆ’ç®—" 
                    },
                    { time: "10:00", title: "ä¸­ä¹‹å³¶å…¬åœ’", icon: "tree", desc: "æ•£æ­¥ï¼šç¾è¡“é¤¨ã€ç«¥æ›¸æ£®æ—ã€å…¬æœƒå ‚", type: "activity" },
                    { time: "13:30", title: "Orange Street", icon: "shirt", desc: "å—å €æ±Ÿï¼šæ½®ç‰Œã€æˆ¶å¤–ç”¨å“", type: "shopping" },
                    { time: "15:30", title: "æ¢…ç”° Loft", icon: "pen-ruler", desc: "ç¾è¡“ç”¨å“æ¡è³¼", type: "shopping" },
                    { time: "16:30", title: "SteP SPORTS Run City Osaka", icon: "person-running", desc: "èŒ¶å±‹ç”ºè·‘è€…è–åœ°", type: "shopping" },
                    { time: "18:00", title: "ç©ºä¸­åº­åœ’å±•æœ›å°", icon: "cloud", desc: "æ¢…ç”°è—å¤©å¤§å»ˆçœ‹å¤•é™½", type: "activity" }
                ]
            },
            {
                day: 6, date: "02/21", weekday: "é€±å…­", location: "å¥ˆè‰¯", color: "bg-[#FAD689]",
                events: [
                    { 
                        time: "äº¤é€š", 
                        title: "å¤§é˜ª â” å¥ˆè‰¯ ğŸ’³åˆ·ICå¡", 
                        icon: "train", 
                        type: "transport",
                        desc: "é›£æ³¢ç«™ â” è¿‘éµå¥ˆè‰¯ç·š (å¿«é€Ÿæ€¥è¡Œ) â” è¿‘éµå¥ˆè‰¯ç«™" 
                    },
                    { time: "10:00", title: "æ±å¤§å¯º & å¥ˆè‰¯å…¬åœ’", icon: "deer", desc: "å¤§ä½›æ®¿ã€é¤µå°é¹¿", type: "activity" },
                    { time: "13:30", title: "å¥ˆè‰¯ è‹¥è‰å±±", icon: "mountain", desc: "çµ•æ™¯è¡Œå±±", type: "activity" },
                    { time: "15:30", title: "é¹¿çŒ¿ç‹åŒ…è¢±å°è·¯", icon: "store", desc: "ä¸­å·æ”¿ä¸ƒæ——è‰¦åº—", type: "shopping" },
                    { time: "17:00", title: "å¥ˆè‰¯ç”º", icon: "mug-hot", desc: "èŒ¶é“èˆ‡å’Œè“å­é«”é©—", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "å¥ˆè‰¯ â” é£¯åº— ğŸ’³åˆ·ICå¡", 
                        icon: "train", 
                        type: "transport",
                        desc: "è¿‘éµè¿”å›é›£æ³¢ â” åœ°éµå›æœ¬ç”º" 
                    }
                ]
            },
            {
                day: 7, date: "02/22", weekday: "é€±æ—¥", location: "å’Œæ­Œå±±", color: "bg-[#A8D8B9]",
                events: [
                    { time: "09:30", title: "æ±æ€¥stayå¤§é˜ªæœ¬ç”ºé…’åº—", icon: "door-open", desc: "Check-out (è¼•è£å‡ºç™¼)", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "å¤§é˜ª â” å’Œæ­Œå±± ğŸ«JRå»£åŸŸ5æ—¥åˆ¸", 
                        icon: "train", 
                        type: "transport",
                        desc: "åœ°éµè‡³å¤©ç‹å¯º â” è½‰ä¹˜ã€JRç‰¹æ€¥é»‘æ½®è™Ÿ (Kuroshio)ã€‘â” JRå’Œæ­Œå±±ç«™\n(èˆ’é©ä¸”å…¨å«åœ¨PASSå…§)" 
                    },
                    { time: "11:00", title: "å’Œæ­Œå±±å¤§å’ŒROYNETé…’åº—", icon: "hotel", desc: "Check-in", type: "hotel" },
                    { 
                        time: "äº¤é€š", 
                        title: "å’Œæ­Œå±±å¸‚å€ â” å¥§ä¹‹é™¢ ğŸ’³åˆ·ICå¡/å¦è³¼ç¥¨", 
                        icon: "car", 
                        type: "transport",
                        desc: "æ–¹æ¡ˆA(æ¨è–¦)ï¼šç§Ÿè»Š/åŒ…è»Šç›´é”\næ–¹æ¡ˆBï¼šJRå’Œæ­Œå±±ç·šâ†’æ©‹æœ¬â†’å—æµ·é«˜é‡ç·šâ†’çºœè»Šâ†’å·´å£«" 
                    },
                    { time: "14:30", title: "å¥§ä¹‹é™¢", icon: "gopuram", desc: "é«˜é‡å±±è–åœ°å·¡ç¦®ï¼Œåƒå¹´æ‰æœ¨æ—", type: "activity" },
                    { time: "17:00", title: "å’Œæ­Œå±±åŸ", icon: "chess-rook", desc: "æ¬£è³å¤œæ™¯é»ç‡ˆ", type: "activity" },
                    { time: "18:30", title: "äº•å‡ºå•†åº—", icon: "bowl-food", desc: "å¿…åƒï¼šå’Œæ­Œå±±æ‹‰éºµ", type: "food" }
                ]
            },
            {
                day: 8, date: "02/23", weekday: "é€±ä¸€", location: "å’Œæ­Œå±±", color: "bg-[#A8D8B9]",
                events: [
                    { 
                        time: "äº¤é€š", 
                        title: "é£¯åº— â” è²´å¿—ç«™ ğŸ«JRå»£åŸŸ5æ—¥åˆ¸", 
                        icon: "cat", 
                        type: "transport",
                        desc: "JRå’Œæ­Œå±±ç«™ â” ã€å’Œæ­Œå±±é›»éµ è²´å¿—å·ç·šã€‘ â” è²´å¿—ç«™\n(ç›´æ¥å‡ºç¤ºJR PASSå³å¯æ­ä¹˜)" 
                    },
                    { time: "10:00", title: "è²´å¿—ç«™", icon: "paw", desc: "æ¢è¨ªè²“å’ªç«™é•· (äºŒä»£ç‰/å››ä»£ç‰)", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "JRå’Œæ­Œå±±ç«™ â” é›œè³€å´ ğŸ’³åˆ·ICå¡", 
                        icon: "bus", 
                        type: "transport",
                        desc: "å’Œæ­Œå±±å·´å£« (å¾€é›œè³€å´æ–¹å‘)" 
                    },
                    { time: "13:30", title: "é›œè³€å´æ¼æ¸¯", icon: "water", desc: "æ—¥æœ¬é˜¿ç‘ªè²ï¼Œæµ·æ™¯å’–å•¡å»³", type: "activity" },
                    { 
                        time: "äº¤é€š", 
                        title: "é›œè³€å´ â” é—œè¥¿æ©Ÿå ´ ğŸ«JRå»£åŸŸ5æ—¥åˆ¸", 
                        icon: "plane", 
                        type: "transport",
                        desc: "1. å·´å£«å›å¸‚å€\n2. JRé˜ªå’Œç·š/é—œç©ºå¿«é€Ÿ â” è‡¨ç©ºåŸ â” é—œè¥¿æ©Ÿå ´\n(å…¨ç¨‹åˆ©ç”¨ PASS)" 
                    },
                    { time: "16:30", title: "è‡¨ç©ºåŸ Outlet", icon: "bag-shopping", desc: "æœ€å¾Œè¡åˆºï¼šé‹å‹•å“ç‰Œæƒè²¨", type: "shopping" },
                    { time: "23:00", title: "æ­ä¹˜ MM069 èˆªç­", icon: "plane-departure", desc: "T2 èˆªå»ˆï¼Œè¿”å›ç”œèœœçš„å®¶", type: "flight" }
                ]
            }
        ];

        // --- 2. é‚è¼¯ Hooks (ä¿æŒåŸæ¨£) ---
        const useNotes = () => {
            const [notes, setNotes] = useState([]);
            useEffect(() => {
                try {
                    const saved = localStorage.getItem('trip_notes');
                    if (saved) setNotes(JSON.parse(saved));
                } catch (e) { console.error("LS Error", e); }
            }, []);
            const addNote = (note) => {
                const newNotes = [...notes, note];
                setNotes(newNotes);
                try { localStorage.setItem('trip_notes', JSON.stringify(newNotes)); } catch(e){}
            };
            const deleteNote = (index) => {
                const newNotes = notes.filter((_, i) => i !== index);
                setNotes(newNotes);
                try { localStorage.setItem('trip_notes', JSON.stringify(newNotes)); } catch(e){}
            };
            return { notes, addNote, deleteNote };
        };

        const openMap = (query) => {
            const q = encodeURIComponent(query);
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                window.location.href = `comgooglemaps://?q=${q}`;
                setTimeout(() => { window.location.href = `https://www.google.com/maps/search/?api=1&query=${q}`; }, 500);
            } else if (/android/i.test(userAgent)) {
                window.location.href = `geo:0,0?q=${q}`;
                setTimeout(() => { window.location.href = `https://www.google.com/maps/search/?api=1&query=${q}`; }, 500);
            } else {
                window.open(`https://www.google.com/maps/search/?api=1&query=${q}`, '_blank');
            }
        };

        const openDirections = (title) => {
            const parts = title.split('â”');
            if (parts.length < 2) return openMap(title);
            const origin = encodeURIComponent(parts[0].replace('[äº¤é€š]', '').trim());
            const dest = encodeURIComponent(parts[1].split(/[(\[ğŸ«ğŸ’³]/)[0].trim());
            window.open(`https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${dest}&travelmode=transit`, '_blank');
        };

        // --- 3. å…ƒä»¶ Views ---

        const ItineraryView = () => (
            <div className="p-4 space-y-6 fade-in pb-24">
                <header className="mb-6 mt-2">
                    <h1 className="text-2xl font-bold text-gray-800 tracking-tight">Kansai 2026</h1>
                    <p className="text-sm text-gray-500 font-medium">ç¥æˆ¶ Â· æœ‰é¦¬ Â· å¤§é˜ª Â· å¥ˆè‰¯ Â· å’Œæ­Œå±±</p>
                </header>
                {itineraryData.map((dayData) => (
                    <div key={dayData.day} className="relative pl-5 border-l-2 border-gray-200 ml-1">
                        <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white shadow-sm ${dayData.color}`}></div>
                        <div className="mb-4">
                            <h2 className="text-lg font-bold text-gray-800 flex items-center">
                                Day {dayData.day} <span className="mx-2 text-gray-300">|</span> {dayData.date} {dayData.weekday}
                            </h2>
                            <span className={`inline-block px-2 py-0.5 rounded text-xs text-white font-bold ${dayData.color} mt-1`}>
                                {dayData.location}
                            </span>
                        </div>
                        <div className="space-y-4">
                            {dayData.events.map((event, idx) => (
                                <div key={idx} className="glass-card p-4 rounded-xl flex gap-4 items-start relative overflow-hidden group">
                                    <div className="mt-1 w-8 h-8 rounded-full flex items-center justify-center bg-gray-50 text-gray-400 shrink-0 text-sm">
                                        <i className={`fa-solid fa-${event.icon}`}></i>
                                    </div>
                                    <div className="flex-1 min-w-0">
                                        <div className="flex justify-between items-baseline mb-1">
                                            <h3 className="font-bold text-gray-800 text-sm leading-snug">{event.title}</h3>
                                            {event.time !== "äº¤é€š" && <span className="text-xs font-mono text-gray-400 shrink-0 ml-2">{event.time}</span>}
                                        </div>
                                        <p className="text-xs text-gray-500 leading-relaxed whitespace-pre-line">{event.desc}</p>
                                        
                                        {event.type === 'transport' && (
                                            <button onClick={() => openDirections(event.title)} className={`mt-3 text-xs bg-[#78C2C4] text-white px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition-transform flex items-center w-fit`}>
                                                <i className="fa-solid fa-diamond-turn-right mr-1.5"></i> å°èˆª
                                            </button>
                                        )}
                                        {['activity', 'food', 'shopping', 'hotel'].includes(event.type) && (
                                            <button onClick={() => openMap(event.title)} className="mt-3 text-xs bg-white border border-gray-200 text-gray-600 px-3 py-1.5 rounded-full active:bg-gray-50 transition-colors flex items-center w-fit">
                                                <i className="fa-solid fa-map-location-dot mr-1.5"></i> åœ°åœ–
                                            </button>
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        );

        const ExploreView = () => {
            const { notes, addNote, deleteNote } = useNotes();
            const [input, setInput] = useState({ title: '', content: '' });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!input.title) return;
                addNote({ ...input, id: Date.now() });
                setInput({ title: '', content: '' });
            };

            return (
                <div className="p-4 fade-in pb-24 h-screen flex flex-col">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 mt-2">æ—…è¡Œç­†è¨˜</h2>
                    <form onSubmit={handleSubmit} className="glass-card p-4 rounded-xl mb-6 shrink-0">
                        <input type="text" placeholder="æ¨™é¡Œ (ä¾‹å¦‚: å¿…è²·è—¥å¦)" 
                            className="w-full bg-transparent border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-[#78C2C4] mb-3 placeholder-gray-400 text-gray-700"
                            value={input.title} onChange={e => setInput({...input, title: e.target.value})}
                        />
                        <textarea placeholder="å…§å®¹å‚™è¨»..." 
                            className="w-full bg-transparent border-b border-gray-200 py-2 text-sm focus:outline-none focus:border-[#78C2C4] h-20 resize-none placeholder-gray-400 text-gray-700"
                            value={input.content} onChange={e => setInput({...input, content: e.target.value})}
                        ></textarea>
                        <button type="submit" className={`mt-3 w-full bg-[#78C2C4] text-white py-2.5 rounded-lg text-sm font-bold shadow-md active:scale-95 transition-all`}>
                            <i className="fa-solid fa-plus mr-1"></i> æ–°å¢ç­†è¨˜
                        </button>
                    </form>

                    <div className="flex-1 overflow-y-auto space-y-3 no-scrollbar pb-4">
                        {notes.length === 0 && (
                            <div className="text-center text-gray-400 mt-10 text-sm flex flex-col items-center opacity-60">
                                <i className="fa-regular fa-clipboard mb-3 text-3xl"></i>
                                <p>é‚„æ²’æœ‰ç­†è¨˜ï¼Œè¨˜é»ä»€éº¼å§ï¼</p>
                            </div>
                        )}
                        {notes.map((note, idx) => (
                            <div key={note.id} className="glass-card p-4 rounded-xl relative group">
                                <h3 className="font-bold text-gray-800 text-sm pr-6">{note.title}</h3>
                                <p className="text-xs text-gray-500 mt-1 whitespace-pre-line">{note.content}</p>
                                <button onClick={() => deleteNote(idx)} className="absolute top-3 right-3 text-gray-300 hover:text-red-400 p-1 transition-colors">
                                    <i className="fa-solid fa-trash-can"></i>
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Tools View - Updated Rail Section
        const ToolsView = () => {
            const [activeSubTab, setActiveSubTab] = useState('rail');
            return (
                <div className="p-4 fade-in pb-24">
                    <h2 className="text-xl font-bold text-gray-800 mb-4 mt-2">å¯¦ç”¨å·¥å…·</h2>
                    <div className="flex bg-gray-200/50 p-1 rounded-xl mb-6">
                        {['rail', 'currency', 'weather'].map(tab => (
                            <button key={tab} onClick={() => setActiveSubTab(tab)}
                                className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${activeSubTab === tab ? 'bg-white shadow-sm text-[#78C2C4]' : 'text-gray-500'}`}>
                                {tab === 'rail' && 'äº¤é€šç¥¨åˆ¸'}
                                {tab === 'currency' && 'åŒ¯ç‡æ›ç®—'}
                                {tab === 'weather' && 'å¤©æ°£é å ±'}
                            </button>
                        ))}
                    </div>

                    <div className="min-h-[300px]">
                        {activeSubTab === 'rail' && (
                            <div className="space-y-4">
                                {/* KRP */}
                                <div className="glass-card p-5 rounded-xl relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1.5 h-full bg-[#78C2C4]"></div>
                                    <h3 className="font-bold text-gray-800 mb-3 flex items-center text-lg">
                                        <i className="fa-solid fa-ticket text-[#78C2C4] mr-2"></i>
                                        é—œè¥¿éµè·¯å¡ (KRP)
                                    </h3>
                                    <div className="space-y-3">
                                        <div className="bg-white/50 p-2 rounded-lg">
                                            <p className="text-xs text-gray-500 font-bold mb-1">ğŸ“… å»ºè­°è³¼è²·ï¼š3æ—¥åˆ¸</p>
                                            <p className="text-sm text-gray-700">ä½¿ç”¨æ–¼ Day 2, 3, 4 (ç¥æˆ¶/æœ‰é¦¬/ç§»å‹•æ—¥)</p>
                                        </div>
                                        <ul className="text-sm text-gray-600 space-y-2 list-disc list-inside">
                                            <li><span className="font-bold">å…Œæ›åœ°é»ï¼š</span>é—œè¥¿æ©Ÿå ´æ—…éŠè³‡è¨Šä¸­å¿ƒ (KTIC) æˆ–æŒ‡å®šç§éµç«™å‹™å®¤ã€‚</li>
                                            <li><span className="font-bold">é©ç”¨ï¼š</span>ç¥æˆ¶é›»éµ(è²´!)ã€é˜ªç¥ã€é˜ªæ€¥ã€‚</li>
                                            <li className="text-red-400">æ³¨æ„ï¼šä¸å« JRã€ç¥æˆ¶å¸‚å·´å£«ã€æ‘©è€¶çºœè»Šã€‚</li>
                                        </ul>
                                    </div>
                                </div>

                                {/* JR Wide */}
                                <div className="glass-card p-5 rounded-xl relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1.5 h-full bg-[#A8D8B9]"></div>
                                    <h3 className="font-bold text-gray-800 mb-3 flex items-center text-lg">
                                        <i className="fa-solid fa-train text-[#A8D8B9] mr-2"></i>
                                        JR é—œè¥¿å»£åŸŸå‘¨éŠåˆ¸
                                    </h3>
                                    <div className="space-y-3">
                                        <div className="bg-white/50 p-2 rounded-lg">
                                            <p className="text-xs text-gray-500 font-bold mb-1">ğŸ“… è¦æ ¼ï¼š5æ—¥åˆ¸</p>
                                            <p className="text-sm text-gray-700">ä½¿ç”¨æ–¼ Day 4~8 (å«å›ç¨‹æ©Ÿå ´)</p>
                                        </div>
                                        <ul className="text-sm text-gray-600 space-y-2 list-disc list-inside">
                                            <li><span className="font-bold">å…Œæ›åœ°é»ï¼š</span>JR ç¶ è‰²çª—å£æˆ–ç¶ è‰²å”®ç¥¨æ©Ÿ (éœ€è­·ç…§)ã€‚</li>
                                            <li><span className="font-bold">å¿…æ­ï¼š</span>ç‰¹æ€¥ Kuroshio (å¤§é˜ªâ†”å’Œæ­Œå±±)ã€å’Œæ­Œå±±é›»éµ(è²´å¿—ç·š)ã€é—œç©ºç‰¹æ€¥ã€‚</li>
                                        </ul>
                                    </div>
                                </div>

                                {/* IC Card */}
                                <div className="glass-card p-5 rounded-xl relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1.5 h-full bg-[#FEDFE1]"></div>
                                    <h3 className="font-bold text-gray-800 mb-3 flex items-center text-lg">
                                        <i className="fa-brands fa-apple text-[#FEDFE1] mr-2"></i>
                                        IC å¡ (Suica/ICOCA)
                                    </h3>
                                    <p className="text-sm text-gray-600 leading-relaxed">
                                        ç”¨æ–¼å¡«è£œå‘¨éŠåˆ¸ç„¡æ³•è¦†è“‹çš„ç©ºæª”ï¼šDay 1 æ©Ÿå ´èˆ¹ã€å¤§é˜ªå¸‚å€åœ°éµã€å¥ˆè‰¯è¿‘éµã€ä»¥åŠæ‰€æœ‰å¸‚å€å…¬è»Šã€‚å»ºè­°ç›´æ¥ç¶å®š Apple Pay æˆ–æº–å‚™å¯¦é«”å¡ã€‚
                                    </p>
                                </div>
                            </div>
                        )}
                        {activeSubTab === 'currency' && (
                            <div className="text-center text-gray-400 py-12 flex flex-col items-center">
                                <i className="fa-solid fa-coins text-5xl mb-4 opacity-30"></i>
                                <p className="text-sm">å»ºè­°ä¸‹è¼‰ <strong>xCurrency</strong> App</p>
                                <p className="text-xs mt-1">å–å¾—æœ€å³æ™‚åŒ¯ç‡æ›ç®—</p>
                            </div>
                        )}
                        {activeSubTab === 'weather' && (
                            <div className="text-center text-gray-400 py-12 flex flex-col items-center">
                                <i className="fa-solid fa-cloud-sun-rain text-5xl mb-4 opacity-30"></i>
                                <p className="text-sm">2æœˆé—œè¥¿å¹³å‡ï¼š5Â°C ~ 11Â°C</p>
                                <p className="text-xs mt-1">æ´‹è”¥å¼ç©¿æ­ï¼Œå¿…å‚™åœå·¾èˆ‡å¥½èµ°çš„é‹</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const InfoView = () => {
            const hotels = [
                { name: "ç¥æˆ¶ç¾åˆ©å …å…¬åœ’æ±æ–¹å¤§é…’åº—", days: "Day 1-2", link: "https://hk.trip.com/account/bookings" },
                { name: "æœˆå…‰åœ’éŠæœˆå±±èŠ (æœ‰é¦¬)", days: "Day 3", link: "https://hk.trip.com/account/bookings" },
                { name: "æ±æ€¥ Stay å¤§é˜ªæœ¬ç”º", days: "Day 4-6", link: "https://hk.trip.com/account/bookings" },
                { name: "å’Œæ­Œå±±å¤§å’Œ Roynet é…’åº—", days: "Day 7", link: "https://hk.trip.com/account/bookings" },
            ];

            return (
                <div className="p-4 fade-in pb-24 space-y-5">
                    <h2 className="text-xl font-bold text-gray-800 mb-2 mt-2">èˆªç­èˆ‡ä½å®¿</h2>
                    
                    {/* Boarding Pass Style Flight Info */}
                    <div className="glass-card p-0 rounded-xl overflow-hidden shadow-md">
                        <div className="bg-[#FEDFE1] px-5 py-3 flex justify-between items-center border-b border-white">
                            <span className="text-sm font-bold text-gray-700"><i className="fa-solid fa-plane-departure mr-2"></i>å›ç¨‹èˆªç­</span>
                            <span className="text-sm font-mono text-gray-600 font-bold">MM069</span>
                        </div>
                        <div className="p-5 flex justify-between items-center">
                            <div className="text-center">
                                <div className="text-3xl font-black text-gray-800">KIX</div>
                                <div className="text-xs text-gray-500 mt-1">é—œè¥¿ T2</div>
                                <div className="text-lg font-mono font-bold text-[#78C2C4] mt-1">23:00</div>
                            </div>
                            <div className="flex-1 px-4 flex flex-col items-center opacity-40">
                                <i className="fa-solid fa-plane text-xl rotate-90 mb-2"></i>
                                <div className="w-full border-t-2 border-dashed border-gray-400"></div>
                            </div>
                            <div className="text-center">
                                <div className="text-3xl font-black text-gray-800">HKG</div>
                                <div className="text-xs text-gray-500 mt-1">é¦™æ¸¯ T1</div>
                                <div className="text-lg font-mono font-bold text-[#78C2C4] mt-1">02:30</div>
                            </div>
                        </div>
                    </div>

                    {/* Hotel List */}
                    <div className="space-y-3">
                        <h3 className="text-sm font-bold text-gray-500 ml-1">ä½å®¿æ¸…å–®</h3>
                        {hotels.map((hotel, idx) => (
                            <div key={idx} className="glass-card p-4 rounded-xl flex items-center justify-between active:scale-[0.98] transition-transform">
                                <div className="flex items-center gap-4">
                                    <button onClick={() => openMap(hotel.name)} className="w-10 h-10 rounded-full bg-white flex items-center justify-center text-gray-400 shadow-sm hover:bg-[#78C2C4] hover:text-white transition-colors">
                                        <i className="fa-solid fa-location-dot"></i>
                                    </button>
                                    <div>
                                        <a href={hotel.link} target="_blank" className="font-bold text-gray-800 text-sm block mb-1">
                                            {hotel.name}
                                        </a>
                                        <span className="text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded">
                                            {hotel.days}
                                        </span>
                                    </div>
                                </div>
                                <a href={hotel.link} target="_blank" className="text-gray-300">
                                    <i className="fa-solid fa-chevron-right"></i>
                                </a>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const BottomNav = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'itinerary', icon: 'calendar-days', label: 'è¡Œç¨‹' },
                { id: 'explore', icon: 'pen-to-square', label: 'ç­†è¨˜' },
                { id: 'tools', icon: 'suitcase', label: 'å·¥å…·' },
                { id: 'info', icon: 'circle-info', label: 'è³‡è¨Š' },
            ];

            return (
                <div className="fixed bottom-0 left-0 w-full bg-white/80 backdrop-blur-md border-t border-gray-200 pb-safe z-50">
                    <div className="flex justify-around items-center h-16 max-w-md mx-auto">
                        {tabs.map(tab => (
                            <button key={tab.id} onClick={() => setActiveTab(tab.id)}
                                className={`flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${activeTab === tab.id ? 'text-[#78C2C4] -translate-y-1' : 'text-gray-400'}`}>
                                <i className={`fa-solid fa-${tab.icon} text-xl mb-1`}></i>
                                <span className="text-[10px] font-medium">{tab.label}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // --- 4. ä¸»ç¨‹å¼ App ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');

            return (
                <div className="max-w-md mx-auto min-h-screen relative bg-[#fdfafb]">
                    {activeTab === 'itinerary' && <ItineraryView />}
                    {activeTab === 'explore' && <ExploreView />}
                    {activeTab === 'tools' && <ToolsView />}
                    {activeTab === 'info' && <InfoView />}
                    <BottomNav activeTab={activeTab} setActiveTab={setActiveTab} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
